<!--
  Generated template for the NewsFeedPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>NewsFeed</ion-title>
  </ion-navbar>

</ion-header>


<ion-content class="bg-grey">
  <ion-grid class="bg-white margin-bottom-md">
    <ion-row>
      <ion-col col-2>
        <img class="avatar" [hidden]="!userData" [src]="userAvatar" onError="this.src='assets/imgs/profile-pic.png';"/>
      </ion-col>
      <ion-col col-10>
        <input type="text" class="new-post-input" placeholder="Post some content.." (click)="goToCreatePost()">
      </ion-col>
    </ion-row>
  </ion-grid>
  <div class="post-holder bg-white" *ngFor = "let post of posts | orderBy: ['-postedOn']">
      <ion-grid>
    <ion-row>
    <ion-col col-2>
      <img class="avatar" [hidden]="!userData" [src]="post.posterImage" onError="this.src='assets/imgs/profile-pic.png';"/>
    </ion-col>
    <ion-col col-10>
      <div class="poster-name">
        <span class="pull-left" (click)="goToProfilePage(post.createdBy)">{{post.posterName}}</span>
        <span class="pull-right exam-id">#{{post.examId}}</span>
        <div class="clearfix"></div>
      </div>
      <div class="posted-on">{{post.postedOn | smartDate:15}}</div>
    </ion-col>
  </ion-row>
</ion-grid>
  <div class="post-content">{{post.postContent}}</div>

  <div class="likes-comments-holder">
    <div class="likes-holder pull-left" *ngIf="post.likes>0">
      <ion-icon name="thumbs-up" class="thumbs-up-icon"></ion-icon><span class="font-black"> {{post.likes}}</span>
    </div>
    <div class="comments-holder pull-right font-black" *ngIf="post.comments>0">
      <span (click)="goToComments(post)">{{post.comments}} Comment<span *ngIf="post.comments>1">s</span></span>
    </div>
    <div class="clearfix"></div>
  </div>

  <div class="buttons-holder">
    <button ion-button class="pull-left like-btn" [ngClass]="{'likedByMe': post.likedByme}" (click)="like(post)">
      <ion-icon name="thumbs-up" class="like-btn-icon" [ngClass]="{'likedByMe': post.likedByme}"></ion-icon> Like
    </button>
    <button ion-button class="pull-left comment-btn" (click)="goToComments(post)">
      <ion-icon name="text" class="comment-btn-icon"></ion-icon> Comment
    </button>
    <button ion-button class="pull-left share-btn">
      <ion-icon name="share-alt" class="share-btn-icon"></ion-icon> Share
    </button>
    <div class="clearfix"></div>
  </div>

  </div>
</ion-content>
